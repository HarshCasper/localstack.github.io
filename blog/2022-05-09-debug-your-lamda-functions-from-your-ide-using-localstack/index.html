<!doctype html><html lang=en-us><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="ie=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><link rel=stylesheet href=https://localstack.cloud/css/vendor/custom.css><link rel=preload as=font href=https://localstack.cloud/fonts/vendor/jost/jost-v4-latin-regular.woff2 type=font/woff2 crossorigin><link rel=preload as=font href=https://localstack.cloud/fonts/vendor/jost/jost-v4-latin-700.woff2 type=font/woff2 crossorigin><link rel=stylesheet href=https://localstack.cloud/main.7bd7b47af200218dafdebb2caab0b40c9140a1f5f33056cffb50a845f895473902be770b5739bc88ad7b08a67a97ff75e8528f2a4e5ad0be021096646b8069bd.css integrity="sha512-e9e0evIAIY2v3rssqrC0DJFAofXzMFbP+1CoRfiVRzkCvncLVzm8iK17CKZ6l/916FKPKk5a0L4CEJZka4BpvQ==" crossorigin=anonymous><noscript><style>img.lazyload{display:none}</style></noscript><meta name=robots content="index, follow"><meta name=googlebot content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1"><meta name=bingbot content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1"><title>Debug Lambda functions from your IDE using LocalStack - LocalStack</title><meta name=description content="LocalStack makes it easier to develop, test & debug your Lambda functions locally. Learn how you can attach a debugger to your Lambda function from your IDE using LocalStack."><link rel=canonical href=https://localstack.cloud/blog/2022-05-09-debug-your-lamda-functions-from-your-ide-using-localstack/><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://localstack.cloud/blog/2022-05-09-debug-your-lamda-functions-from-your-ide-using-localstack/debug-your-lambda-functions-from-your-ide-using-localstack.png"><meta name=twitter:title content="Debug Lambda functions from your IDE using LocalStack"><meta name=twitter:description content="LocalStack makes it easier to develop, test & debug your Lambda functions locally. Learn how you can attach a debugger to your Lambda function from your IDE using LocalStack."><meta name=twitter:site content="@_localstack"><meta name=twitter:creator content="@_localstack"><meta property="og:title" content="Debug Lambda functions from your IDE using LocalStack"><meta property="og:description" content="LocalStack makes it easier to develop, test & debug your Lambda functions locally. Learn how you can attach a debugger to your Lambda function from your IDE using LocalStack."><meta property="og:type" content="article"><meta property="og:url" content="/blog/2022-05-09-debug-your-lamda-functions-from-your-ide-using-localstack/"><meta property="og:image" content="https://localstack.cloud/blog/2022-05-09-debug-your-lamda-functions-from-your-ide-using-localstack/debug-your-lambda-functions-from-your-ide-using-localstack.png"><meta property="article:published_time" content="2022-05-09T05:08:41+05:30"><meta property="article:modified_time" content="2022-05-09T05:08:41+05:30"><meta property="og:site_name" content="LocalStack"><meta property="article:publisher" content="https://www.facebook.com/"><meta property="article:author" content="https://www.facebook.com/"><meta property="og:locale" content="en_US"><script type=application/ld+json>{"@context":"https://schema.org","@type":"Article","mainEntityOfPage":{"@type":"WebPage","@id":"\/blog\/2022-05-09-debug-your-lamda-functions-from-your-ide-using-localstack\/"},"headline":"Debug Lambda functions from your IDE using LocalStack","image":["/blog/2022-05-09-debug-your-lamda-functions-from-your-ide-using-localstack/debug-your-lambda-functions-from-your-ide-using-localstack.png"],"datePublished":"2022-05-09T05:08:41CET","dateModified":"2022-05-09T05:08:41CET","author":{"@type":"Organization","name":"LocalStack"},"publisher":{"@type":"Organization","name":"LocalStack","logo":{"@type":"ImageObject","url":"\/\/images\/localstack.png"}},"description":"LocalStack makes it easier to develop, test \u0026 debug your Lambda functions locally. Learn how you can attach a debugger to your Lambda function from your IDE using LocalStack."}</script><script type=application/ld+json>{"@context":"http://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Home","item":"https:\/\/localstack.cloud\/"},{"@type":"ListItem","position":3,"name":"Blog","item":"https:\/\/localstack.cloud\/\/blog\/"},{"@type":"ListItem","position":4,"name":"2022 05 09 Debug Your Lamda Functions From Your Ide Using Localstack","item":"https:\/\/localstack.cloud\/\/blog\/2022-05-09-debug-your-lamda-functions-from-your-ide-using-localstack\/"}]}</script><meta name=theme-color content="#fff"><link rel=apple-touch-icon sizes=180x180 href=https://localstack.cloud/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=https://localstack.cloud/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=https://localstack.cloud/favicon-16x16.png><link rel=manifest href=https://localstack.cloud/site.webmanifest><script>(function(a,e,f,g,b,c,d){a.GoogleAnalyticsObject=b,a[b]=a[b]||function(){(a[b].q=a[b].q||[]).push(arguments)},a[b].l=1*new Date,c=e.createElement(f),d=e.getElementsByTagName(f)[0],c.async=1,c.src=g,d.parentNode.insertBefore(c,d)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga'),ga('create','UA-101988473-1','auto'),ga('send','pageview')</script></head><body class="blog single"><div class="header-bar fixed-top"></div><header class="navbar fixed-top navbar-expand-md navbar-light"><div class=container-fluid><input class="menu-btn order-0" type=checkbox id=menu-btn>
<label class="menu-icon d-md-none" for=menu-btn><span class=navicon></span></label><a class="navbar-brand order-1 order-md-0 me-auto" href=https://localstack.cloud/><img src=https://localstack.cloud/images/header-logo.svg height=30px alt=Logo></a><ul class="navbar-nav social-nav order-3 order-md-5"><li class=nav-item><a class=nav-link target=_blank href=https://twitter.com/_localstack><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-twitter"><path d="M23 3a10.9 10.9.0 01-3.14 1.53 4.48 4.48.0 00-7.86 3v1A10.66 10.66.0 013 4s-4 9 5 13a11.64 11.64.0 01-7 2c9 5 20 0 20-11.5a4.5 4.5.0 00-.08-.83A7.72 7.72.0 0023 3z"/></svg><span class="ms-2 visually-hidden">Twitter</span></a></li><li class=nav-item><a class=nav-link target=_blank href=https://github.com/localstack><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-github"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37.0 00-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44.0 0020 4.77 5.07 5.07.0 0019.91 1S18.73.65 16 2.48a13.38 13.38.0 00-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07.0 005 4.77 5.44 5.44.0 003.5 8.55c0 5.42 3.3 6.61 6.44 7A3.37 3.37.0 009 18.13V22"/></svg><span class="ms-2 visually-hidden">GitHub</span></a></li><li class=nav-item><a class="btn btn-primary" type=link href=https://app.localstack.cloud><i class="bi bi-laptop"></i> Sign up</a></li></ul><div class="collapse navbar-collapse order-4 order-md-1"><ul class="navbar-nav main-nav me-auto order-5 order-md-2"><li class="nav-item dropdown"><a class="nav-link dropdown-toggle" href=# id=productsDropdown data-bs-toggle=dropdown aria-haspopup=true aria-expanded=false>Products</a><div class=dropdown-menu aria-labelledby=productsDropdown><a class=dropdown-item href=https://localstack.cloud/products/emulation/>LocalStack Core Emulation</a>
<a class=dropdown-item href=https://localstack.cloud/products/enterprise/>LocalStack Team/Enterprise</a>
<a class=dropdown-item href=https://app.localstack.cloud>LocalStack Web App</a>
<a class=dropdown-item href=https://localstack.cloud/products/cockpit>LocalStack Cockpit</a></div></li><li class=nav-item><a class=nav-link style=white-space:nowrap href=https://localstack.cloud/pricing/>Pricing</a></li><li class=nav-item><a class=nav-link style=white-space:nowrap href=https://localstack.cloud/docs/>Docs</a></li><li class="nav-item active"><a class=nav-link style=white-space:nowrap href=https://localstack.cloud/blog/>Blog</a></li><li class=nav-item><a class=nav-link style=white-space:nowrap href=https://app.localstack.cloud><i class="bi bi-laptop"></i> App</a></li></ul><div class="break order-6 d-md-none"></div></div></div></header><div class="wrap container" role=document><div class=content><div class="row justify-content-center"><div class="col-md-12 col-lg-10 col-xl-8"><article><div class=blog-header><h1>Debug Lambda functions from your IDE using LocalStack</h1><p><small>Posted May 9, 2022 by <a class="stretched-link position-relative" href=https://localstack.cloud/contributors/localstack-team/>LocalStack Team</a>&nbsp;&dash;&nbsp;<strong>7&nbsp;min read</strong></small><p></div><p class=lead>LocalStack makes it easier to develop, test & debug your Lambda functions locally. Learn how you can attach a debugger to your Lambda function from your IDE using LocalStack.</p><div class="mt-4 mb-4 text-center"><i class="bi bi-stack"></i></div><a href=https://localstack.cloud/blog/2022-05-09-debug-your-lamda-functions-from-your-ide-using-localstack/debug-your-lambda-functions-from-your-ide-using-localstack.png target=_blank><figure><img class="img-fluid lazyload blur-up" data-sizes=auto src=https://localstack.cloud/blog/2022-05-09-debug-your-lamda-functions-from-your-ide-using-localstack/_hu286f9c0bbcf997ee3b91707567062538_211441_2fa577e3c7e937e0462a231ef7d28ae1.png data-srcset="https://localstack.cloud/blog/2022-05-09-debug-your-lamda-functions-from-your-ide-using-localstack/_hu286f9c0bbcf997ee3b91707567062538_211441_e354b81ad16d93df4d08f7bf9b1d1507.png 900w,https://localstack.cloud/blog/2022-05-09-debug-your-lamda-functions-from-your-ide-using-localstack/_hu286f9c0bbcf997ee3b91707567062538_211441_a0353f17087dc3b192f8ade3e81cbe92.png 800w,https://localstack.cloud/blog/2022-05-09-debug-your-lamda-functions-from-your-ide-using-localstack/_hu286f9c0bbcf997ee3b91707567062538_211441_96634b6851b1558abb010e058ef842d6.png 700w,https://localstack.cloud/blog/2022-05-09-debug-your-lamda-functions-from-your-ide-using-localstack/_hu286f9c0bbcf997ee3b91707567062538_211441_4e3612a086240541546574b19f88cbdc.png 600w,https://localstack.cloud/blog/2022-05-09-debug-your-lamda-functions-from-your-ide-using-localstack/_hu286f9c0bbcf997ee3b91707567062538_211441_f7a1b6c4d564d099f7fe3965bf6427c5.png 500w" width=1280 height=720><noscript><img class=img-fluid sizes=100vw srcset="https://localstack.cloud/blog/2022-05-09-debug-your-lamda-functions-from-your-ide-using-localstack/_hu286f9c0bbcf997ee3b91707567062538_211441_e354b81ad16d93df4d08f7bf9b1d1507.png 900w,https://localstack.cloud/blog/2022-05-09-debug-your-lamda-functions-from-your-ide-using-localstack/_hu286f9c0bbcf997ee3b91707567062538_211441_a0353f17087dc3b192f8ade3e81cbe92.png 800w,https://localstack.cloud/blog/2022-05-09-debug-your-lamda-functions-from-your-ide-using-localstack/_hu286f9c0bbcf997ee3b91707567062538_211441_96634b6851b1558abb010e058ef842d6.png 700w,https://localstack.cloud/blog/2022-05-09-debug-your-lamda-functions-from-your-ide-using-localstack/_hu286f9c0bbcf997ee3b91707567062538_211441_4e3612a086240541546574b19f88cbdc.png 600w,https://localstack.cloud/blog/2022-05-09-debug-your-lamda-functions-from-your-ide-using-localstack/_hu286f9c0bbcf997ee3b91707567062538_211441_f7a1b6c4d564d099f7fe3965bf6427c5.png 500w" src=https://localstack.cloud/blog/2022-05-09-debug-your-lamda-functions-from-your-ide-using-localstack/debug-your-lambda-functions-from-your-ide-using-localstack.png width=1280 height=720></noscript></figure></a><p>In the <a href=https://localstack.cloud/blog/2022-03-07-hot-swapping-python-lambda-functions-using-localstack/>previous blog</a>, we checked out how to hot-swap Lambda functions locally using LocalStack. Using LocalStack, you can execute your Lambda functions locally without the need to deploy them to AWS. This is a great way to test your code and learn more about how your Lambda functions work before deploying them to AWS. But there is always a question about debugging the Lambda functions from your IDE before deploying it. This is a tricky problem because, with hot reload, you would have to invoke your Lambda function multiple times to figure out where the bug is, and we don’t have a proper way to set breakpoints in our debugger to inspect the code later on.</p><p>To solve this, LocalStack features local Lambda debugging supported on various Integrated Development Environments (IDEs) like VS Code, IntelliJ, PyCharm and more. With local Lambda debugging, you can quickly debug your Lambda functions by setting breakpoints, while your local code mounting allows you to validate your changes instantly. This workflow aims to significantly improve your Lambda development & testing experience with LocalStack, where you can test your code on every change without having to deploy it on AWS or even re-running your deployment scripts.</p><p>This blog will look over how you can debug your Python, and JVM Lambda functions from VS Code. You will also see how to configure your local IDE for local debugging and make the best use of LocalStack’s functionality for Lambda debugging and testing.</p><h2 id=configuring-localstack-for-python-debugging>Configuring LocalStack for Python debugging</h2><p>In this blog, we already presume that you have installed LocalStack and tried running it locally at least once. If not, you can install LocalStack using the following command via <code>pip</code>:</p><pre><code class=language-sh>pip install localstack
</code></pre><p>It will install the <code>localstack-cli</code>, which runs the Docker image that hosts the LocalStack runtime. To ensure that we can use the remote debugging feature, we need to start LocalStack using specific configuration options. These are detailed on our <a href=https://docs.localstack.cloud/localstack/configuration/#lambda>Lambda configuration page</a>. Copy the following command into your terminal:</p><pre><code class=language-sh>LAMBDA_REMOTE_DOCKER=0 \ 
LAMBDA_DOCKER_FLAGS='-p 19891:19891' \ 
DEBUG=1 localstack start -d
</code></pre><p>The <code>LAMBDA_REMOTE_DOCKER</code> option is set to <code>0</code> (deactivated) to ensure that the Lambda volume mounts work while we are mounting a temporary folder on the host. The <code>LAMBDA_DOCKER_FLAGS</code> defines a Docker flag that exposes port 19891 for debugging the Lambda handler code that will run inside the container.</p><p>You will also need to install our LocalStack AWS CLI, which is a thin wrapper around the aws command line interface for use with LocalStack, using <code>pip</code>:</p><pre><code class=language-sh>pip install awscli-local
</code></pre><h2 id=configuring-the-code-for-remote-debugging>Configuring the code for remote debugging</h2><p>After setting up LocalStack and launching it in detached mode, we can now configure the debug server using <code>debugpy</code>. <code>debugpy</code> is an implementation of the <a href=https://microsoft.github.io/debug-adapter-protocol/>Debug Adapter Protocol</a> for Python 3 and is used for debugging on VS Code. <code>debugpy</code> implements all of the standard debugging tools you would expect and provides a standardised way for development tools to communicate with debuggers.</p><p>To enable <code>debugpy</code> inside the Lambda function, you need to place the following block of code inside the handler code:</p><pre><code class=language-python>import debugpy 
debugpy.listen(19891) 
debugpy.wait_for_client()
</code></pre><p>The <code>wait_for_client()</code> function blocks execution until client is attached. You can also use the <code>wait_for_debug_client</code> function which implements the start of the debug server and also adds an automatic cancellation of the wait task if the debug client (i.e. VSCode) doesn’t connect.</p><p>Please note that in the code snippet below we assume that the debugpy package has been installed into a <code>virtualenv</code> folder named <code>.venv</code> inside the same directory where the Lambda handler (<code>handler.py</code>) is stored on the local disk (see further below). Hence, adding <code>.venv/lib/python*/site-packages</code> to the Python system path ensures that debugpy is available to the Lambda handler execution at runtime.</p><pre><code class=language-python>def wait_for_debug_client(timeout=15):
    &quot;&quot;&quot;Utility function to enable debugging with Visual Studio Code&quot;&quot;&quot;
    import time, threading
    import sys, glob
    sys.path.append(glob.glob(&quot;.venv/lib/python*/site-packages&quot;)[0])
    import debugpy

    debugpy.listen((&quot;0.0.0.0&quot;, 19891))
    class T(threading.Thread):
        daemon = True
        def run(self):
            time.sleep(timeout)
            print(&quot;Canceling debug wait task ...&quot;)
            debugpy.wait_for_client.cancel()
    T().start()
    print(&quot;Waiting for client to attach debugger ...&quot;)
    debugpy.wait_for_client()
</code></pre><h2 id=creating-a-python-lambda-function>Creating a Python Lambda function</h2><p>For the purpose of this blog, we will use a simple AWS Lambda function which will just wait for the debugger to be attached and print the invocation event:</p><pre><code class=language-python>def handler(event, context):
    &quot;&quot;&quot;Lambda handler that will get invoked by the LocalStack runtime&quot;&quot;&quot;

    # wait for the debugger to get attached
    wait_for_debug_client()
    # print the incoming invocation event
    print(event)


def wait_for_debug_client(timeout=15):
    &quot;&quot;&quot;Utility function to enable debugging with Visual Studio Code&quot;&quot;&quot;
    import time, threading
    import sys, glob
    sys.path.append(glob.glob(&quot;.venv/lib/python*/site-packages&quot;)[0])
    import debugpy

    debugpy.listen((&quot;0.0.0.0&quot;, 19891))
    class T(threading.Thread):
        daemon = True
        def run(self):
            time.sleep(timeout)
            print(&quot;Canceling debug wait task ...&quot;)
            debugpy.wait_for_client.cancel()
    T().start()
    print(&quot;Waiting for client to attach debugger ...&quot;)
    debugpy.wait_for_client()


if __name__ == &quot;__main__&quot;:
    handler({}, {})
</code></pre><p>To start debugging, we first need to create the Lambda function on LocalStack. We will deploy the Lambda using a unique S3 bucket indicated by <code>__local__</code> as the bucket name.</p><p>The S3 key path should point to the directory of your Lambda function code. You can save the above example as a file in a directory of your choice. The handler is referenced by the filename of your Lambda function, where the code inside of it is invoked. Copy and paste the following command in your terminal:</p><pre><code class=language-sh>awslocal lambda create-function --function-name my-cool-local-function \
    --code S3Bucket=&quot;__local__&quot;,S3Key=&quot;$(pwd)/&quot; \
    --handler handler.handler \
    --runtime python3.8 \
    --role cool-stacklifter
</code></pre><p>We can test the above Lambda function by invoking it with a payload:</p><pre><code class=language-sh>awslocal lambda invoke --function-name my-cool-local-function --payload '{&quot;message&quot;: &quot;Hello from LocalStack!&quot;}' output.txt
</code></pre><p>Configuring Visual Studio Code for Python Lambda debugging</p><p>For attaching the debug server from Visual Studio Code, you need to add a run configuration. The run view displays all the information related to running and debugging with a top bar which has all the debugging commands and configuration settings. Create a <code>launch.json</code> file in the <code>.vscode</code> directory of your project and add the following:</p><pre><code class=language-json>{
    &quot;version&quot;: &quot;0.2.0&quot;,
    &quot;configurations&quot;: [
        {
            &quot;name&quot;: &quot;Python: Remote Attach&quot;,
            &quot;type&quot;: &quot;python&quot;,
            &quot;request&quot;: &quot;attach&quot;,
            &quot;connect&quot;: {
                &quot;host&quot;: &quot;localhost&quot;,
                &quot;port&quot;: 19891
            },
            &quot;pathMappings&quot;: [
                {
                    &quot;localRoot&quot;: &quot;${workspaceFolder}&quot;,
                    &quot;remoteRoot&quot;: &quot;.&quot;
                }
            ]
        }
    ]
}
</code></pre><p>You have about 15 seconds to switch to Visual Studio Code and run the preconfigured remote debugger with the above function. This timeout is configurable, and now you can set a breakpoint in the Lambda handler code first, which can then later be inspected.</p><p>Here is our Lambda debugger in action:</p><a href=https://localstack.cloud/blog/2022-05-09-debug-your-lamda-functions-from-your-ide-using-localstack/lambda-function-debugging-vs-code.png target=_blank><figure><img class="img-fluid lazyload blur-up" data-sizes=auto src=https://localstack.cloud/blog/2022-05-09-debug-your-lamda-functions-from-your-ide-using-localstack/lambda-function-debugging-vs-code_hu665e4e461dc7cf7e5cf77c24e043abb4_474866_20x0_resize_box_2.png data-srcset="https://localstack.cloud/blog/2022-05-09-debug-your-lamda-functions-from-your-ide-using-localstack/lambda-function-debugging-vs-code_hu665e4e461dc7cf7e5cf77c24e043abb4_474866_900x0_resize_box_2.png 900w,https://localstack.cloud/blog/2022-05-09-debug-your-lamda-functions-from-your-ide-using-localstack/lambda-function-debugging-vs-code_hu665e4e461dc7cf7e5cf77c24e043abb4_474866_800x0_resize_box_2.png 800w,https://localstack.cloud/blog/2022-05-09-debug-your-lamda-functions-from-your-ide-using-localstack/lambda-function-debugging-vs-code_hu665e4e461dc7cf7e5cf77c24e043abb4_474866_700x0_resize_box_2.png 700w,https://localstack.cloud/blog/2022-05-09-debug-your-lamda-functions-from-your-ide-using-localstack/lambda-function-debugging-vs-code_hu665e4e461dc7cf7e5cf77c24e043abb4_474866_600x0_resize_box_2.png 600w,https://localstack.cloud/blog/2022-05-09-debug-your-lamda-functions-from-your-ide-using-localstack/lambda-function-debugging-vs-code_hu665e4e461dc7cf7e5cf77c24e043abb4_474866_500x0_resize_box_2.png 500w" width=2284 height=1266><noscript><img class=img-fluid sizes=100vw srcset="https://localstack.cloud/blog/2022-05-09-debug-your-lamda-functions-from-your-ide-using-localstack/lambda-function-debugging-vs-code_hu665e4e461dc7cf7e5cf77c24e043abb4_474866_900x0_resize_box_2.png 900w,https://localstack.cloud/blog/2022-05-09-debug-your-lamda-functions-from-your-ide-using-localstack/lambda-function-debugging-vs-code_hu665e4e461dc7cf7e5cf77c24e043abb4_474866_800x0_resize_box_2.png 800w,https://localstack.cloud/blog/2022-05-09-debug-your-lamda-functions-from-your-ide-using-localstack/lambda-function-debugging-vs-code_hu665e4e461dc7cf7e5cf77c24e043abb4_474866_700x0_resize_box_2.png 700w,https://localstack.cloud/blog/2022-05-09-debug-your-lamda-functions-from-your-ide-using-localstack/lambda-function-debugging-vs-code_hu665e4e461dc7cf7e5cf77c24e043abb4_474866_600x0_resize_box_2.png 600w,https://localstack.cloud/blog/2022-05-09-debug-your-lamda-functions-from-your-ide-using-localstack/lambda-function-debugging-vs-code_hu665e4e461dc7cf7e5cf77c24e043abb4_474866_500x0_resize_box_2.png 500w" src=https://localstack.cloud/blog/2022-05-09-debug-your-lamda-functions-from-your-ide-using-localstack/lambda-function-debugging-vs-code.png width=2284 height=1266></noscript></figure></a><h2 id=configuring-localstack-for-jvm-debugging>Configuring LocalStack for JVM debugging</h2><p>To configure LocalStack for JVM debugging, you would need to set the <code>LAMBDA_JAVA_OPTS</code> with jdwp settings and expose the debug port of your choice. Over a <code>docker-compose.yml</code>, you can do that via:</p><pre><code class=language-yml>services:
  localstack:
    ...
    environment:
      ...
      - LAMBDA_JAVA_OPTS=-agentlib:jdwp=transport=dt_socket,server=y,suspend=y,address=*:5050
      - LAMBDA_DOCKER_FLAGS=-p 127.0.0.1:5050:5050
</code></pre><p>The <code>suspend=y</code> option delays the code execution until debugger is attached to debugger server. To change the behavior, turn it to <code>suspend=n</code>.</p><h2 id=configuring-visual-studio-code-for-jvm-lambda-debugging>Configuring Visual Studio Code for JVM Lambda debugging</h2><p>To configure Visual Studio Code, for JVM Lambda debugging, we need to install the <a href="https://marketplace.visualstudio.com/items?itemName=redhat.java">Language support for Java</a> and <a href="https://marketplace.visualstudio.com/items?itemName=vscjava.vscode-java-debug">Debugger for Java</a> extensions. Create a new <code>.vscode/tasks.json</code> file, if not already present, and add a new task to it:</p><pre><code class=language-json>{
    &quot;version&quot;: &quot;2.0.0&quot;,
    &quot;tasks&quot;: [
        {
          &quot;label&quot;: &quot;Wait Remote Debugger Server&quot;,
          &quot;type&quot;: &quot;shell&quot;,
          &quot;command&quot;: &quot;while [[ -z $(docker ps | grep :5050) ]]; do sleep 1; done; sleep 1;&quot;
        }
    ]
}
</code></pre><p>Create a new <code>launch.json</code> file or edit an existing one from the <code>Run and Debug</code> tab, then add the following configuration:</p><pre><code class=language-json>{
    &quot;version&quot;: &quot;0.2.0&quot;,
    &quot;configurations&quot;: [
        {
            &quot;type&quot;: &quot;java&quot;,
            &quot;name&quot;: &quot;Remote JVM on LS Debug&quot;,
            &quot;projectRoot&quot;: &quot;${workspaceFolder}&quot;,
            &quot;request&quot;: &quot;attach&quot;,
            &quot;hostName&quot;: &quot;localhost&quot;,
            &quot;preLaunchTask&quot;: &quot;Wait Remote Debugger Server&quot;,
            &quot;port&quot;: 5050
        }
    ]
}
</code></pre><p>To debug your lambda function, click on the <code>Debug</code> icon with <code>Remote JVM on LS Debug</code> configuration selected, and then invoke your Lambda function.</p><h2 id=conclusion>Conclusion</h2><p>Debugging your Lambda function with LocalStack in your IDE is a great way to enable quick feedback cycles, and to test and validate your code logic before pushing it to production. Since you have already mounted the local Lambda function from your local filesystem into the Lambda container, LocalStack would immediately reflect the changes in the above section. Here is an example where you change the implementation of the handler as follows:</p><pre><code class=language-py>def handler(event, context):
    &quot;&quot;&quot;Lambda handler that will get invoked by the LocalStack runtime&quot;&quot;&quot;

    # wait for the debugger to get attached
    wait_for_debug_client()
    # print the incoming invocation event
    print(event)

    # additional line added below:
    print(&quot;!! Additional log output !!&quot;)
</code></pre><p>Upon the following invocation of the Lambda, the additional print output will immediately appear in the Lambda logs. This allows for a quick development & debug loop without the need to redeploy the Lambda after the handler is changed! However, due to the ports used by the debugger, you can currently only debug one Lambda at a time, due to which multiple concurrent invocations will not work.</p><p>Find the Lambda Code Mounting & Debugging code on our <a href=https://github.com/localstack/localstack-pro-samples/tree/master/lambda-mounting-and-debugging>LocalStack Pro Samples</a>. You can create an issue on <a href=https://github.com/localstack/localstack>GitHub</a> or connect with us on <a href=https://localstack.cloud/contact>LocalStack Slack</a> to get help.</p></article></div></div></div></div><section class="section section-md text-center mt-0 pt-0"><i class="bi bi-stack"></i></section><footer class="footer text-muted"><div class=footer-main><div class=container-fluid><div class=row><div class="col-12 col-sm-12 col-md-4 col-lg-3"><div><img class=footer-logo src=https://localstack.cloud/images/localstack.svg></div></div><div class="col-12 col-sm-12 col-md-6 col-lg-9 mt-4 mt-md-0"><div class=row><div class=col><h5 class="mt-0 h6">LocalStack <i class="bi bi-stack"></i></h5><ul class=list-unstyled><li><a href=https://localstack.cloud/contact>Contact</a></li><li><a href=https://localstack.cloud/pricing>Pricing</a></li><li><a href=https://localstack.cloud/blog>Blog</a></li><li><a href=https://localstack.cloud/jobs>Jobs</a></li><li><a href=https://app.localstack.cloud>App</a></li><li><a href=https://localstack.cloud/community>Community</a></li><li><a href=https://localstack.cloud/faq>FAQ</a></li></ul></div><div class=col><h5 class="mt-0 h6">Resources</h5><ul class=list-unstyled><li><a href=https://github.com/localstack>GitHub</a></li><li><a href=https://hub.docker.com/u/localstack>DockerHub</a></li><li><a href=https://localstack.cloud/docs>Docs</a></li></ul></div></div></div></div></div></div><div class=footer-bottom><div class="container-fluid mb-2"><hr><div class=row><div class=col>Copyright &copy; LocalStack</div><div class="col text-end"><ul class=list-inline><li class=list-inline-item><a href=https://localstack.cloud/privacy-policy>Privacy policy</a></li><li class=list-inline-item><a href=https://localstack.cloud/terms>Terms of Service</a></li><li class=list-inline-item><a href=https://localstack.cloud/#>Imprint</a></li></ul></div></div></div></div></footer><script src=https://localstack.cloud/js/bootstrap.min.51b4083a09e54138d5bbe9c42a5f5f71af6e60a417f276d5620cbde3b15eb1a07c9ea17a889bc58074adf9b19641039a77521d3131f039300d2fe29ffa532aa8.js integrity="sha512-UbQIOgnlQTjVu+nEKl9fca9uYKQX8nbVYgy947FesaB8nqF6iJvFgHSt+bGWQQOad1IdMTHwOTANL+Kf+lMqqA==" crossorigin=anonymous defer></script><script src=https://localstack.cloud/js/highlight.min.8cdbefd08ec63ef25f4b2510ae50c13b3d9ed43e25a15ddb55f14c33130e68cf8be3131ccf2d087c49f5f21fe88c2f0e2715a21f936047d0d0b85dc48cb864b9.js integrity="sha512-jNvv0I7GPvJfSyUQrlDBOz2e1D4loV3bVfFMMxMOaM+L4xMczy0IfEn18h/ojC8OJxWiH5NgR9DQuF3EjLhkuQ==" crossorigin=anonymous defer></script><script src=https://localstack.cloud/main.min.c667076fdc4df64bfcdde045586335c6f39e83b2890638c198f84cf7b06629acef2ef8536a38a1c5978689f003b2bd3918bc5b3400e1e62670dd1a558e29ccd9.js integrity="sha512-xmcHb9xN9kv83eBFWGM1xvOeg7KJBjjBmPhM97BmKazvLvhTajihxZeGifADsr05GLxbNADh5iZw3RpVjinM2Q==" crossorigin=anonymous defer></script><script src=https://localstack.cloud/index.min.b7c90b25fcf9450b672c2ce4506e3056c7808d872c8b86eb919cdd4e851f8c9ba5fed0a4bfecfa3e25ffafe774357862bdf2312d15ad89e18a45c1fce80cf4d0.js integrity="sha512-t8kLJfz5RQtnLCzkUG4wVseAjYcsi4brkZzdToUfjJul/tCkv+z6PiX/r+d0NXhivfIxLRWtieGKRcH86Az00A==" crossorigin=anonymous defer></script></body></html>